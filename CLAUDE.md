# Claude AI Development Guidelines

> This project is co-developed by human developers and Claude AI.

## üìã Project Declaration

- ‚úÖ Code co-authored by developers and Claude AI
- ‚úÖ All code is original or uses open-source licensed code
- ‚ùå **Prohibited: Any infringing code, unauthorized commercial code, or code violating license agreements**
- ‚úÖ Third-party libraries must have clear license types
- ‚úÖ Commit attribution: `Co-Authored-By: Claude AI <noreply@anthropic.com>`

## üìù Code Commit Documentation Requirements

### Mandatory Commit Records
Every code commit **MUST** include the following information:

#### 1. Commit Message Format
```
<type>: <subject>

<body>

Generated-By: <author> with Claude AI
Date: <YYYY-MM-DD HH:MM:SS>
Location: <file paths or module names>
Changes: <brief description of changes>

Co-Authored-By: Claude AI <noreply@anthropic.com>
```

#### 2. Commit Message Example
```
feat: Add user feedback management module

Implemented complete feedback CRUD operations including:
- Feedback creation API endpoint
- Feedback list with filtering and pagination
- Feedback statistics dashboard
- Admin feedback management interface

Generated-By: Zhang San with Claude AI
Date: 2026-02-06 14:30:00
Location: src/views/FeedbackManagement.vue, src/api/api-feedback.ts
Changes: Added 3 new files, modified 2 existing files, +450 lines

Co-Authored-By: Claude AI <noreply@anthropic.com>
```

#### 3. Required Information (5W)

**Who (Ë∞Å)** - Developer and AI identification
**When (‰ΩïÊó∂)** - Date and time (YYYY-MM-DD HH:MM:SS)
**Where (‰ΩïÂú∞)** - File paths, modules, line changes
**What (‰Ωï‰∫ã)** - Type and description of changes
**Why (‰∏∫‰Ωï)** - Reason (optional but recommended)

#### 4. Commit Types
```
feat:     New feature
fix:      Bug fix
docs:     Documentation
refactor: Code refactoring
test:     Testing
chore:    Build/tools
security: Security fixes
```

### File-Level Documentation
For significant changes, add header comments:
```typescript
/**
 * @created 2026-02-06 by Zhang San with Claude AI
 * @modified 2026-02-06 by Zhang San with Claude AI
 * @description Brief description
 */
```

### Change Log (CHANGELOG.md)
Maintain for major features:
```markdown
## [1.2.0] - 2026-02-06
### Added
- Feature name
  - Generated by: Name with Claude AI
  - Files: path/to/files
  - Changes: +850 lines
```

## üìù Code Commit Documentation Requirements

### Mandatory Commit Records
Every code commit **MUST** include the following information:

#### 1. Commit Message Format
```
<type>: <subject>

<body>

Generated-By: <author> with Claude AI
Date: <YYYY-MM-DD HH:MM:SS>
Location: <file paths or module names>
Changes: <brief description of changes>

Co-Authored-By: Claude AI <noreply@anthropic.com>
```

#### 2. Commit Message Example
```
feat: Add user feedback management module

Implemented complete feedback CRUD operations including:
- Feedback creation API endpoint
- Feedback list with filtering and pagination
- Feedback statistics dashboard
- Admin feedback management interface

Generated-By: Zhang San with Claude AI
Date: 2026-02-06 14:30:00
Location: src/views/FeedbackManagement.vue, src/api/api-feedback.ts
Changes: Added 3 new files, modified 2 existing files, +450 lines

Co-Authored-By: Claude AI <noreply@anthropic.com>
```

#### 3. Required Information

**Who (Ë∞Å)**
- Developer name or username
- AI assistant identification (Claude AI)

**When (‰ΩïÊó∂)**
- Commit date and time (YYYY-MM-DD HH:MM:SS format)
- Timezone if relevant

**Where (‰ΩïÂú∞)**
- Modified file paths
- Affected modules or components
- Line count changes (+/- lines)

**What (‰Ωï‰∫ã)**
- Type of change (feat/fix/docs/style/refactor/test/chore)
- Brief description of modifications
- Key features or fixes implemented

**Why (‰∏∫‰Ωï)** (Optional but recommended)
- Reason for the change
- Related issue or ticket number
- Business requirement reference

#### 4. Commit Types

```
feat:     New feature
fix:      Bug fix
docs:     Documentation changes
style:    Code formatting (no logic change)
refactor: Code refactoring
test:     Adding or updating tests
chore:    Build process or tool changes
perf:     Performance improvements
security: Security fixes or improvements
```

### File-Level Documentation

For significant changes, add a header comment in the modified file:

```typescript
/**
 * Feedback Management Module
 *
 * @created 2026-02-06 by Zhang San with Claude AI
 * @modified 2026-02-06 by Zhang San with Claude AI
 * @description User feedback CRUD operations and management interface
 * @changes
 *   - 2026-02-06: Initial implementation of feedback list and filters
 *   - 2026-02-06: Added feedback statistics dashboard
 */
```

### Change Log Maintenance

For major features or releases, maintain a CHANGELOG.md:

```markdown
## [1.2.0] - 2026-02-06

### Added
- User feedback management system
  - Generated by: Zhang San with Claude AI
  - Files: src/views/FeedbackManagement.vue, feedback-api/app.py
  - Lines: +850 lines
  - Description: Complete feedback CRUD with admin interface

### Fixed
- Login authentication bypass issue
  - Generated by: Li Si with Claude AI
  - Files: src/routers/index.ts
  - Lines: +45 -30 lines
  - Description: Added default permissions for development mode
```

### Git Commit Best Practices

1. **Atomic Commits**: One logical change per commit
2. **Descriptive Messages**: Clear and concise descriptions
3. **Reference Issues**: Link to issue tracker when applicable
4. **Sign Commits**: Use GPG signing for important commits
5. **Review Before Push**: Always review changes before pushing

## üîí Security Rules

### Input Validation
- **MUST** validate and filter all user inputs
- **MUST** use whitelist instead of blacklist
- **MUST** use parameterized queries (prevent SQL injection)
- **MUST** escape HTML content (prevent XSS)

### Sensitive Data
- **PROHIBITED** hardcoding passwords, keys, tokens in code
- **MUST** use environment variables for sensitive config
- **PROHIBITED** logging sensitive information
- **MUST** encrypt sensitive data in storage

### API Security
- **MUST** implement authentication and authorization
- **MUST** implement rate limiting
- **MUST** use HTTPS for sensitive data
- **MUST** validate API request origins

## üß™ Testing Requirements

### Coverage Requirements
- **Each API endpoint: minimum 5 test cases**
  1. Normal scenario
  2. Boundary values
  3. Invalid inputs
  4. SQL injection test
  5. Permission test
- **Core functions: minimum 3 test cases**
- **Unit test coverage: ‚â• 70%**

### Test Data
- **PROHIBITED** using production data for testing
- **MUST** use separate test database
- **MUST** clean up test data after tests

## üìù Code Quality Standards

### Complexity Limits
- **Cyclomatic Complexity**: ‚â§ 10 per function, ‚â§ 50 per file
- **Nesting Depth**: ‚â§ 4 levels
- **Function Length**: ‚â§ 50 lines (excluding comments)
- **Function Parameters**: ‚â§ 4 parameters

### Naming Conventions
```typescript
// Files: kebab-case
user-service.ts, feedback-management.vue

// Classes/Interfaces: PascalCase
class UserService, interface FeedbackData

// Functions/Variables: camelCase
function getUserById(), const userList

// Constants: UPPER_SNAKE_CASE
const MAX_RETRY_COUNT = 3

// Booleans: is/has/should prefix
const isActive, hasPermission
```

### Error Handling
- **MUST** use unified error handling
- **MUST** not expose system error details to users
- **MUST** log errors with context

## üö´ Prohibited Practices

### Absolutely Forbidden
1. ‚ùå Using unauthorized or infringing code
2. ‚ùå Committing code with passwords/keys
3. ‚ùå Direct SQL string concatenation
4. ‚ùå Outputting user input to HTML without escaping
5. ‚ùå Logging sensitive info in production
6. ‚ùå Submitting code without tests
7. ‚ùå Using `any` type (TypeScript) without justification

### Not Recommended
1. ‚ö†Ô∏è Excessive nested ternary operators
2. ‚ö†Ô∏è Magic numbers (use named constants)
3. ‚ö†Ô∏è Overly long functions or files
4. ‚ö†Ô∏è Global variables (except necessary config)

## ‚úÖ Code Review Checklist

Before committing, verify:
- [ ] No hardcoded passwords/keys/tokens?
- [ ] User inputs validated and filtered?
- [ ] SQL queries parameterized?
- [ ] API endpoints have permission checks?
- [ ] New endpoints have ‚â•5 test cases?
- [ ] Cyclomatic complexity ‚â§10?
- [ ] Nesting depth ‚â§4?
- [ ] Function length ‚â§50 lines?
- [ ] Complex logic has comments?
- [ ] **Commit message includes: Who, When, Where, What?**
- [ ] **File headers updated with modification info?**
- [ ] **CHANGELOG.md updated for major changes?**

## üìö Performance Guidelines

### Database
- Avoid N+1 queries
- Use indexes for optimization
- Avoid `SELECT *`
- Paginate large datasets

### Frontend
- Use virtual scrolling for large lists
- Lazy load images
- Use debounce/throttle appropriately
- Avoid expensive operations in loops

---

**Remember: Code quality, security, and testing are not optional‚Äîthey are fundamental.**

Last Updated: 2026-02-06